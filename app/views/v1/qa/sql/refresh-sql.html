{% extends "layout.html" %} {% block pageTitle %} GOV.UK Prototype Kit {%
    endblock %}

{% block content %}

<div class="govuk-grid-row  govuk-!-margin-bottom-9">
  <div class="govuk-grid-column-full">
    <div class="govuk-breadcrumbs govuk-!-margin-bottom-5">
      <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a class="govuk-breadcrumbs__link" href="/start.html">Calculate funding</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
            <a class="govuk-breadcrumbs__link" href="">Quality assurance</a>
          </li>
          <li class="govuk-breadcrumbs__list-item">
              Refresh SQL
            </li>
      </ol>
    </div>
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">Refresh SQL</h1>
    <span class="govuk-caption-xl">Refresh SQL funding</span>
  </div>
</div>

<form action="/v1/qa/sql/loading-spinner-full" method="post" name="refreshSQL" onsubmit="return validateForm()" class="form">
    <fieldset class="govuk-fieldset">

<div class="govuk-form-group" id="refresh-sql-error-funding-stream" >
  <label class="govuk-label" for="sort">
    Funding stream
  </label>
  <span id="funding-stream-error" class="govuk-error-message hideError">
    <span class="govuk-visually-hidden">Error:</span> Select funding stream
  </span>
  <select class="govuk-select" id="fundingStream funding-stream-error" onchange="getFundingStream()" name="funding-stream">
    <option></option>
    <option value="16-19/16-19-results">16 to 19</option>
    <option value="14-16/14-16-results">14 to 16</option>
    <option value="gag/gag-results">General Annual Grant</option>
    <option value="pna/pna-results">Academy Pupil Number Adjustment</option>
  </select>
</div>

<div class="govuk-form-group" id="refresh-sql-error-funding-period">
  <label class="govuk-label" for="sort">
    Funding period
  </label>
  <span id="funding-period-error" class="govuk-error-message hideError">
    <span class="govuk-visually-hidden">Error:</span> Select funding period
  </span>
  <select class="govuk-select" id="fundingPeriod" name="fundingPeriod" onchange="getFundingStream()">
    <option></option>
    <option value="2019 to 2020">2019 to 2020</option>
    <option value="2020 to 2021">2020 to 2021</option>
    <option value="Academies and Schools Academic Year 2019 to 2020">Academies and Schools Academic Year 2019 to 2020
    </option>
    <option value="Academic year 2019 to 2020">Academic year 2019 to 2020</option>
  </select>
</div>

<div class="govuk-form-group">
  <label class="govuk-label" for="sort">
    Specification
  </label>
  <p id="specification" class="govuk-body"></p>

  <button data-prevent-double-click id="viewFundingLink" class="govuk-button" data-module="govuk-button">
    Push data
  </button>

</fieldset>
</form>

  <script>


    function getFundingStream() {
      var fundingStream = document.getElementById("fundingStream");
      var fundingStreamText = fundingStream.options[fundingStream.selectedIndex].text;
      var fundingPeriod = document.getElementById("fundingPeriod").value;
      document.getElementById("specification").innerHTML = fundingStreamText + ' ' + fundingPeriod;
    }

    function validateForm() {
        var fundingStreamValidate = document.forms["refreshSQL"]["funding-stream"].value
        var fundingPeriodValidate = document.forms["refreshSQL"]["fundingPeriod"].value
        error = ""

            if (fundingStreamValidate == "") {
            document.getElementById('refresh-sql-error-funding-stream').classList.add("govuk-form-group--error");
            document.getElementById('funding-stream-error').classList.remove("hideError")
            error = "true"
            };

            if (fundingPeriodValidate == "") {
            document.getElementById('refresh-sql-error-funding-period').classList.add("govuk-form-group--error");
            document.getElementById('funding-period-error').classList.remove("hideError")
            error = "true"
            return false
            } 
            
            else {
              return true
            }

    }
  </script>

  {% endblock %}