{% extends "layout.html" %}
{% set active_page = "start.html" %}


{% block pageTitle %}
GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}

<div class="govuk-breadcrumbs">
    <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
            <a class="govuk-breadcrumbs__link" href="/start">
                Home
            </a>
        </li>

    </ol>
</div>

{% endblock %}


{% block content %}


<div class="govuk-grid-row  govuk-!-margin-bottom-4">
    <div class="govuk-grid-column-full ">
        <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">Specifications</h1>
        <span class="govuk-caption-l">Create and manage the specifications used to calculate funding.</span>
    </div>
</div>


<div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third">
        <a href="createSpecification" class="govuk-button govuk-button--primary" data-module="govuk-button">
            Create a new specification
        </a>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third">
        <div class="govuk-form-group filterbyContainer">
            <fieldset class="govuk-fieldset">
                <div class="govuk-form-group filterSearch">
                    <h2 class="govuk-heading-s govuk-!-display-inline-block govuk-!-margin-top-2 govuk-!-margin-bottom-2"
                        for="filter-by-type">Search</h2>

                    <a href="#"
                        class="govuk-link govuk-!-display-inline-block govuk-!-margin-top-2 govuk-!-margin-bottom-2 right-align"
                        onclick="document.getElementById('mainContentSearch').value = ''">
                        Clear search</a>


                    <input class="govuk-input filterSearchInput govuk-!-margin-bottom-2" id="mainContentSearch"
                        autocomplete="off" name="search" type="text">
                </div>
            </fieldset>
        </div>

        <div class="govuk-form-group filterbyContainer">
            <fieldset class="govuk-fieldset">
                <div class="selected-filters-colour">
                    <div class="govuk-form-group filterSearch">
                        <h2 class="govuk-heading-s govuk-!-display-inline-block govuk-!-margin-top-2 govuk-!-margin-bottom-2"
                            for="filter-by-type">Selected filters</h2>
                        <a href=""
                            class="govuk-link govuk-!-display-inline-block govuk-!-margin-top-2 govuk-!-margin-bottom-2 right-align"
                            onclick="$('input:checkbox').removeAttr('checked'); toggleMe(), countChecked();">
                            Clear filters</a>

                        <div id="showHideText">
                            <p class="govuk-body-s">No filters selected</p>
                        </div>

                        <div id="div1" style="display:none">
                            <div class="moj-filter">
                                <div class="moj-filter__content">
                                    <div class="moj-filter__selected">
                                        <h3 class="govuk-hint govuk-body govuk-!-font-size-16" style="margin: 0px;">
                                            Funding stream</h3>
                                        <ul class="moj-filter-tags">
                                            <li><a class="moj-filter__tag" href=""
                                                    onclick="$('input:checkbox').removeAttr('checked'); display:none, countChecked();"><span
                                                        class="govuk-visually-hidden">Remove this filter</span> PE and
                                                    sports grant (1)</a></li>
                                            <div id="div2" style="display:none">
                                                <li><a class="moj-filter__tag" href=""
                                                        onclick="$('input:checkbox').removeAttr('checked'); countChecked();"><span
                                                            class="govuk-visually-hidden">Remove this filter</span> 16
                                                        to 19 (1)</a></li>
                                            </div>
                                            <div id="div3" style="display:none">
                                                <li><a class="moj-filter__tag" href=""
                                                        onclick="$('input:checkbox').removeAttr('checked'); countChecked();"><span
                                                            class="govuk-visually-hidden">Remove this filter</span>
                                                        General annual grant (1)</a></li>
                                            </div>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </fieldset>

            <fieldset class="govuk-fieldset">
                <div class="govuk-form-group filterSearch">


                    <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-with-summary-sections">
                        <div class="govuk-accordion__section ">
                            <div class="govuk-accordion__section-header">
                                <h2 class="govuk-accordion__section-heading">
                                    <span class="govuk-accordion__section-button govuk-body govuk-!-font-size-19"
                                        id="accordion-with-summary-sections-heading-1">
                                        Funding stream
                                    </span>
                                </h2>
                                <div class="govuk-accordion__section-summary govuk-body govuk-body-s"
                                    id="accordion-with-summary-sections-summary-1">
                                    <span id="num">0</span> selected
                                </div>
                            </div>
                            <div id="accordion-with-summary-sections-content-1" class="govuk-accordion__section-content"
                                aria-labelledby="accordion-with-summary-sections-heading-1">
                                <fieldset class="govuk-fieldset">
                                    <div class="govuk-form-group filterSearch">
                                        <label class="govuk-label filterLabel" for="filter-by-type">
                                            Search for funding stream
                                        </label>
                                        <input class="govuk-input filterSearchInput govuk-!-margin-bottom-2"
                                            id="mainContentSearch" autocomplete="off" name="search" type="text">
                                    </div>
                                    <div class="govuk-checkboxes govuk-checkboxes--small filterbyCheckbox"
                                        id="filterBySchoolResults">
                                        <div class="govuk-checkboxes__item govuk-!-margin-top-2">
                                            <input class="govuk-checkboxes__input" id="showHideChange" name="c1"
                                                onclick="showMe('div1')" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChange">
                                                PE and sports grant <span>(1)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF2" name="c2"
                                                onclick="showMeF2('div2')" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF2">
                                                16 to 19 <span>(1)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF3"
                                                onclick="showMeF3('div3')" name="c3" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF3">
                                                General annual grant <span>(1)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>


                        <div class="govuk-accordion__section ">
                            <div class="govuk-accordion__section-header">
                                <h2 class="govuk-accordion__section-heading">
                                    <span class="govuk-accordion__section-button govuk-body govuk-!-font-size-19"
                                        id="accordion-with-summary-sections-heading-1">
                                        Funding period
                                    </span>
                                </h2>
                                <div class="govuk-accordion__section-summary govuk-body govuk-body-s"
                                    id="accordion-with-summary-sections-summary-1">
                                    0 selected
                                </div>
                            </div>
                            <div id="accordion-with-summary-sections-content-1" class="govuk-accordion__section-content"
                                aria-labelledby="accordion-with-summary-sections-heading-1">
                                <fieldset class="govuk-fieldset">
                                    <div class="govuk-form-group filterSearch">
                                        <label class="govuk-label filterLabel" for="filter-by-type">
                                            Search for funding period
                                        </label>
                                        <input class="govuk-input filterSearchInput govuk-!-margin-bottom-2"
                                            id="mainContentSearch" autocomplete="off" name="search" type="text">
                                    </div>
                                    <div class="govuk-checkboxes govuk-checkboxes--small filterbyCheckbox"
                                        id="filterBySchoolResults">
                                        <div class="govuk-checkboxes__item govuk-!-margin-top-2">
                                            <input class="govuk-checkboxes__input" id="showHideChange" name="c1"
                                                onclick="showMe('div1')" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChange">
                                                Financial year 2020 to 2021<span>(1)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF2" name="c2"
                                                onclick="showMeF2('div2')" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF2">
                                                Academic year 2019 to 2020<span>(1)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF3"
                                                onclick="showMeF3('div3')" name="c3" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF3">
                                                Academies and schools academic<span>(1)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>

                        <div class="govuk-accordion__section ">
                            <div class="govuk-accordion__section-header">
                                <h2 class="govuk-accordion__section-heading">
                                    <span class="govuk-accordion__section-button govuk-body govuk-!-font-size-19"
                                        id="accordion-with-summary-sections-heading-1">
                                        Status
                                    </span>
                                </h2>
                                <div class="govuk-accordion__section-summary govuk-body govuk-body-s"
                                    id="accordion-with-summary-sections-summary-1">
                                    0 selected
                                </div>
                            </div>
                            <div id="accordion-with-summary-sections-content-1" class="govuk-accordion__section-content"
                                aria-labelledby="accordion-with-summary-sections-heading-1">
                                <fieldset class="govuk-fieldset">
                                    <div class="govuk-checkboxes govuk-checkboxes--small filterbyCheckbox"
                                        id="filterBySchoolResults">
                                        <div class="govuk-checkboxes__item govuk-!-margin-top-2">
                                            <input class="govuk-checkboxes__input" id="showHideChange" name="c1"
                                                onclick="showMe('div1')" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChange">
                                                Approved<span>(4)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF2" name="c2"
                                                onclick="showMeF2('div2')" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF2">
                                                Released<span>(2)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF3"
                                                onclick="showMeF3('div3')" name="c3" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF3">
                                                Updated<span>(4)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="showHideChangeF3"
                                                onclick="showMeF3('div3')" name="c3" type="checkbox" value="hmrc">
                                            <label class="govuk-label govuk-checkboxes__label" for="showHideChangeF3">
                                                Error<span>(6)</span>
                                            </label>
                                            <input type="hidden" id="hidden" value="0">
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>

    <div class="govuk-grid-column-two-thirds">
        <table class="govuk-table">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header govuk-!-width-one-third">Specification</th>
                    <th scope="col" class="govuk-table__header govuk-!-width-one-third">Chosen for funding</th>
                    <th scope="col" class="govuk-table__header govuk-!-width-one-third">Last edited date</th>
                    <th scope="col" class="govuk-table__header govuk-!-width-one-third">
                        <span class="govuk-visually-hidden">
                            Specification
                        </span>
                        Status
                    </th>
                </tr>
            </thead>
            <tbody class="govuk-table__body" id="mainContentResults">
                <tr class="govuk-table__row" id="newSpecSource">
                    <th scope="row" class="govuk-table__header">
                        <a id="fundingStreamLink" href="fundingLineStructure-chosen.html">{{ data['spec-name'] }}</a>
                    </th>
                    <td class="govuk-table__cell">8 Sept 2020 10:54am</td>
                    <td class="govuk-table__cell">Draft</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header"><a href="fundingLineStructure">DSG SIT</a></th>
                    <td class="govuk-table__cell"><span class="govuk-visually-hidden">
                            Not chosen for funding
                        </span>
                    </td>
                    <td class="govuk-table__cell">11 Nov 2019 10:54am</td>
                    <td class="govuk-table__cell">Draft</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header"><a href="fundingLineStructure-chosen.html">16 to 19</a>
                    </th>
                    <td class="govuk-table__cell"><strong class="govuk-tag">YES
                            <span class="govuk-visually-hidden">
                                chosen for funding
                            </span>
                        </strong>
                    </td>
                    <td class="govuk-table__cell">28 Jul 2020 10:54am</td>
                    <td class="govuk-table__cell">Approved</td>
                </tr>
                <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header"><a href="fundingLineStructure-gag">General annual
                            grant</a>
                    </th>
                    <td class="govuk-table__cell"><span class="govuk-visually-hidden">
                            Not chosen for funding
                        </span></td>
                    <td class="govuk-table__cell">14 Mar 2021 10:54am</td>
                    <td class="govuk-table__cell">Approved</td>
                </tr>
            </tbody>
        </table>
        <nav class="govuk-!-margin-top-9" role="navigation" aria-label="Pagination">
            <div class="pagination__summary">Showing 101 - 150 of 246 results</div>
            <ul class="pagination">
                <li class="pagination__item"><a class="pagination__link" href="#0" aria-label="Previous page"><span
                            aria-hidden="true" role="presentation">&laquo;</span> Previous</a></li>
                <li class="pagination__item"><a class="pagination__link" href="#0" aria-label="Page 1">1</a></li>
                <li class="pagination__item"><a class="pagination__link" href="#0" aria-label="Page 2">2</a></li>
                <li class="pagination__item"><a class="pagination__link current" href="#0" aria-current="true"
                        aria-label="Page 3, current page">3</a></li>
                <li class="pagination__item"><a class="pagination__link" href="#0" aria-label="Page 4">4</a></li>
                <li class="pagination__item"><a class="pagination__link" href="#0" aria-label="Page 5">5</a></li>
                <li class="pagination__item"><a class="pagination__link" href="#0" aria-label="Next page">Next <span
                            aria-hidden="true" role="presentation">&raquo;</span></a></li>
            </ul>
        </nav>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <script>
        window.onload = function () {
            let newDataSource = sessionStorage.getItem('new spec')
            let tr = document.getElementById('newSpecSource')
            console.log(newDataSource)
            if (newDataSource === 'true') {
                tr.style.display = " ";
            } else {
                tr.style.display = "none";
            }
            let fundingStream = sessionStorage.getItem('funding stream')
            document.getElementById('fundingStreamLink').href = fundingStream
        }

        function showMe(box) {

            var chboxs = document.getElementsByName("c1");
            var vis = "none";
            for (var i = 0; i < chboxs.length; i++) {
                if (chboxs[i].checked) {
                    vis = "block";
                    break;
                }
            }
            document.getElementById(box).style.display = vis;
        }

        function showMeF2(box) {

            var chboxs = document.getElementsByName("c2");
            var vis = "none";
            for (var i = 0; i < chboxs.length; i++) {
                if (chboxs[i].checked) {
                    vis = "block";
                    break;
                }
            }
            document.getElementById(box).style.display = vis;
        }

        function showMeF3(box) {

            var chboxs = document.getElementsByName("c3");
            var vis = "none";
            for (var i = 0; i < chboxs.length; i++) {
                if (chboxs[i].checked) {
                    vis = "block";
                    break;
                }
            }
            document.getElementById(box).style.display = vis;
        }

        function toggleMe() {
            var x = document.getElementsByClassName("moj-filter__content");

            var i;
            for (i = 0; i < x.length; i++) {
                x[i].classList.toggle("hidden")
            }
        }

        // Number of selections 

        $('.govuk-checkboxes__input').change(function () {
            var v = parseInt($('#hidden').val())
            this.checked ? (v += 1) : (v -= 1)
            $('#hidden').val(v)
            document.getElementById('num').innerHTML = v;

            // call ajax to update the value in the server
        });
        document.getElementById('showHideChange').onchange = function () {
            document.getElementById('showHideText').style.display = this.checked ? 'none' : 'block';
        };
    </script>

    {% endblock %}