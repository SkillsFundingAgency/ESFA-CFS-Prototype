{% extends "layout.html" %} 

{% block pageTitle %} 
GOV.UK Prototype Kit 
{% endblock %}

{% block beforeContent %}

<div class="govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" href="/start">
        Home
      </a>
    </li>
    <li class="govuk-breadcrumbs__list-item">
    <a class="govuk-breadcrumbs__link" href="/v1/view-results/viewResults">
        View results
      </a>
    </li>

  </ol>
  
</div>

{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
          <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">
            Select funding 
          </h1>
          <span class="govuk-caption-l govuk-!-margin-bottom-6">Select the 
            funding stream, period and spec to view the provider results. 



          </span>
        </legend>

        <form action="provider-results.html" method="get" no-validate data-validate='funding-stream'>

          <div class="govuk-form-group">
            <label class="govuk-label" for="fundingStream">
              Funding stream
            </label>
            <select class="govuk-select" id="fundingStream" name="fundingStream">
              <option value=""></option>
              <option value="16 to 19">16 to 19</option>
              <option value="General annual grant">General Annual Grant (GAG)</option>
            </select>
          </div>
    
          <div class="govuk-form-group">
            <label class="govuk-label" for="fundingPeriod">
              Funding period
            </label>
            <select class="govuk-select" id="fundingPeriod" name="fundingPeriod">
              <option value=""></option>
              <option value="blank">2019 to 2020</option>
              <option value="blank">2018 to 2019</option>
            </select>
          </div>
    
          <div class="govuk-form-group">
            <label class="govuk-label" for="specificaiotn">
              Specification
            </label>
            <select class="govuk-select" id="specification" name="viewSpecificationSelection">
              <option name="viewSpecificationSelection"></option>
              <option name="viewSpecificationSelection" value="live data">03 Jun v1</option>
              <option name="viewSpecificationSelection" value="no live data">{{ data['fundingStream'] }} (no live data)</option>
            </select>
          </div>
    
          <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
              <div class="govuk-button-group">
                <button id="specification-link" class="govuk-button" data-module="govuk-button">
                  Continue
                </button>
              </div>
            </div>
          </div>
    
        </form>
      </fieldset>


        <!-- <form action="provider-results.html" method="get" no-validate data-validate='funding-stream'>
          <label class="govuk-label" for="fundingStream">Select a funding stream</br>
            <input list="fundingstream" name="fundingStream" class="govuk-select govuk-!-margin-top-1" size="40"
              name="browser" id="browser"></label>
          <datalist id="fundingstream">
            <option value="General annual grant (GAG)">
            <option value="Dedicated schools grant (DSG)">
            <option value="PE and sports premium (PSG)">
            <option value="Pupil number adjustment (PNA)">
            <option value="16 to 19">
            <option value="14 to 16">
            <option value="Dance and drama awards (DADA)">
          </datalist>

    </div>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-button-group">
      <button id="specification-link" class="govuk-button" data-module="govuk-button">
        Continue
      </button>
    </div>
  </div>
</div>

</form> -->


<script type="text/javascript" src="/public/javascripts/accessible-autocomplete.js"></script>

<script type="text/javascript">
  var selectEl = document.querySelector('#funding-stream')
  accessibleAutocomplete.enhanceSelectElement({
    autoselect: true,
    confirmOnBlur: true,
    defaultValue: "",
    minLength: 2,
    selectElement: selectEl
  })

  var queryStringParameters = window.location.search
  var previouslySubmitted = queryStringParameters.length > 0
  if (previouslySubmitted) {
    var submittedEl = document.querySelector('.submitted')
    submittedEl.classList.remove('submitted--hidden')
    var params = new URLSearchParams(document.location.search.split('?')[1])
    document.querySelector('.submitted__last-location').innerHTML = params.get('funding-stream')
  }
</script>

<script type="application/json" id="funding-stream">
  {
    "fundingStream": {
      "presence": {
        "message": "^Select a funding stream"
      }
    }

  }
</script>

{% endblock %}