{% extends "layout.html" %}

{% block pageTitle %}
GOV.UK Prototype Kit
{% endblock %}

{% block content %}

<script type="text/javascript" src="/public/javascripts/accessible-autocomplete.js"></script>


<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-xl">
            Autocomplete
        </h1>        
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third">
        <form action="" method="get">
            <label class="govuk-label" for="fundingStream">Select funding stream
            <div class="autocomplete-wrapper">
                <select name="fundingStream" class="govuk-select" id="funding-stream">
                    <option value="">Select a funding stream</option>
                    <option value="fundingStream: GAG">General annual grant (GAG)</option>
                    <option value="fundingStream: DSG">Dedicated schools grant (DSG)</option>
                    <option value="fundingStream: PES">PE and sports premium</option>
                    <option value="fundingStream: PNA">Pupil number adjustment (PNA)</option>
                    <option value="fundingStream: PNA">16 to 19</option>
                    <option value="fundingStream: PNA">14 to 16</option>
                </select>
            </div>
        </label>
        </form>
    </div>
</div>

<div class="govuk-grid-row govuk-!-margin-top-6">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-m">
            Demo only
        </h1>        
        <p class="govuk-body">Funding streams available</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>General annual grant (GAG)</li>
            <li>Dedicated schools grant (DSG)</li>
            <li>PE and sports premium</li>
            <li>Pupil number adjustment (PNA)</li>
            <li>16 to 19</li>
            <li>14 to 16</li>
        </ul>
    </div>
</div>

<div class="govuk-grid-row govuk-!-margin-top-6">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-m">
            Component notes
        </h1>
        <p class="govuk-body">Autocomplete reverts to a select if JavaScript is disabled in the users browser</p>

    </div>
</div>

<script type="text/javascript">
    var selectEl = document.querySelector('#funding-stream')
    accessibleAutocomplete.enhanceSelectElement({
        autoselect: true,
        confirmOnBlur: true,
        defaultValue: "",
        minLength: 2,
        selectElement: selectEl
    })

    var queryStringParameters = window.location.search
    var previouslySubmitted = queryStringParameters.length > 0
    if (previouslySubmitted) {
        var submittedEl = document.querySelector('.submitted')
        submittedEl.classList.remove('submitted--hidden')
        var params = new URLSearchParams(document.location.search.split('?')[1])
        document.querySelector('.submitted__last-location').innerHTML = params.get('funding-stream')
    }
</script>

{% endblock %}